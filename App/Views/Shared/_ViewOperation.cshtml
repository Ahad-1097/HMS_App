@model App.Models.ViewModel.PatientViewModel

@{
   
    var imageExtensions = new List<string> { "jpg", "jpeg", "png", "gif", "pdf", "docx", "doc" };
}

<div class="col-xl-12 col-lg-12">
    <div class="card">
        <div class="card-header">
            <h4 class="card-title">Operation Details</h4>
        </div>

        <div id="popup-container" style="display: none;"></div>
        <div class="card-body">

            <div class="form-group row">
                <label class="col-sm-3 col-form-label">Consultant:</label>
                <div class="col-sm-9">
                    @ViewBag.SelectedDoctor
                </div>
            </div>

            <div class="form-group row">
                <label class="col-sm-3 col-form-label">Date:</label>
                <div class="col-sm-9">
                    @Html.DisplayFor(model => model.Operation.Date)
                </div>
            </div>

            <div class="form-group row">
                <label class="col-sm-3 col-form-label">Indication:</label>
                <div class="col-sm-9">
                    @Html.DisplayFor(model => model.Operation.Indication)
                </div>
            </div>

            <div class="form-group row">
                <label class="col-sm-3 col-form-label">Anaesthetist:</label>
                <div class="col-sm-9">
                    @Html.DisplayFor(model => model.Operation.Anaesthetist)
                </div>
            </div>

            <div class="form-group row">
                <label class="col-sm-3 col-form-label">Operting Surgeon:</label>
                <div class="col-sm-9">
                    @Html.DisplayFor(model => model.Operation.OpertingSurgeon)
                </div>
            </div>

            <div class="form-group row">
                <label class="col-sm-3 col-form-label">Position:</label>
                <div class="col-sm-9">
                    @Html.DisplayFor(model => model.Operation.Position)
                </div>
            </div>
            <div class="form-group row">
                <label class="col-sm-3 col-form-label">Anaesthesia:</label>
                <div class="col-sm-9">
                    @Html.DisplayFor(model => model.Operation.Anaesthesia)
                </div>
            </div>

            <div class="form-group row">
                <label class="col-sm-3 col-form-label">Preoperative Diagnosis:</label>
                <div class="col-sm-9">
                    @Html.DisplayFor(model => model.Operation.PreoperativeDiagnosis)
                </div>
            </div>

            <div class="form-group row">
                <label class="col-sm-3 col-form-label">Operation Title:</label>
                <div class="col-sm-9">
                    @Html.DisplayFor(model => model.Operation.OperationTitle)
                </div>
            </div>

            <div class="form-group row">
                <label class="col-sm-3 col-form-label">Findings:</label>
                <div class="col-sm-9">
                    @Html.DisplayFor(model => model.Operation.Findings)
                </div>
            </div>

            <div class="form-group row">
                <label class="col-sm-3 col-form-label">Duration:</label>
                <div class="col-sm-9">
                    @Html.DisplayFor(model => model.Operation.Duration)
                </div>
            </div>
            <div class="form-group row">
                <label class="col-sm-3 col-form-label">Steps Of Operation:</label>
                <div class="col-sm-9">
                    @Html.DisplayFor(model => model.Operation.StepsOfOperation)
                </div>
            </div>

            <div class="form-group row">
                <label class="col-sm-3 col-form-label">Antibiotics:</label>
                <div class="col-sm-9">
                    @Html.DisplayFor(model => model.Operation.Antibiotics)
                </div>
            </div>

            <div class="form-group row">
                <label class="col-sm-3 col-form-label">Specimens Sent For:</label>
                <div class="col-sm-9">
                    @Html.DisplayFor(model => model.Operation.SpecimensSentFor)
                </div>
            </div>

            <div class="form-group row">
                <label class="col-sm-3 col-form-label">Post Operative Instructions:</label>
                <div class="col-sm-9">
                    @Html.DisplayFor(model => model.Operation.PostOperativeInstructions)
                </div>
            </div>

            <div class="form-group row">
                <label class="col-md-2 col-form-label">PER OP IMAGE :</label>
                <div class="col-md-2">
                    @if (!string.IsNullOrEmpty(Model.Operation.PerOPImage))
                    {
                        var extension = Model.Operation.PerOPImage.Split('.').LastOrDefault();


                        if (string.Equals(extension, "pdf", StringComparison.OrdinalIgnoreCase))
                        {
                            <a href="~/Images_Data/@Model.Operation.PerOPImage" target="_blank"><i class="fa-solid fa-file-pdf" style="font-size: 40px; color: red"></i></a>
                        }
                        else if (string.Equals(extension, "docx", StringComparison.OrdinalIgnoreCase) || string.Equals(extension, "doc", StringComparison.OrdinalIgnoreCase))
                        {
                            <a href="~/Images_Data/@Model.Operation.PerOPImage" target="_blank"><i class="fa-solid fa-file-word" style="font-size: 40px; color: blue"></i></a>
                        }
                        else
                        {
                            <img class="editimg" src="~/Images_Data/@Model.Operation.PerOPImage" title="@Model.Operation.PerOPImage">
                        }
                    }
                </div>  <div class="col-md-2">
                    @if (!string.IsNullOrEmpty(Model.Operation.Value1))
                    {
                        var extension = Model.Operation.Value1.Split('.').LastOrDefault();


                        if (string.Equals(extension, "pdf", StringComparison.OrdinalIgnoreCase))
                        {
                            <a href="~/Images_Data/@Model.Operation.Value1" target="_blank"><i class="fa-solid fa-file-pdf" style="font-size: 40px; color: red"></i></a>
                        }
                        else if (string.Equals(extension, "docx", StringComparison.OrdinalIgnoreCase) || string.Equals(extension, "doc", StringComparison.OrdinalIgnoreCase))
                        {
                            <a href="~/Images_Data/@Model.Operation.Value1" target="_blank"><i class="fa-solid fa-file-word" style="font-size: 40px; color: blue"></i></a>
                        }
                        else
                        {
                            <img class="editimg" src="~/Images_Data/@Model.Operation.Value1" title="@Model.Operation.Value1">
                        }
                    }
                </div> <div class="col-md-2">
                    @if (!string.IsNullOrEmpty(Model.Operation.Value2))
                    {
                        var extension = Model.Operation.Value2.Split('.').LastOrDefault();

                        if (string.Equals(extension, "pdf", StringComparison.OrdinalIgnoreCase))
                        {
                            <a href="~/Images_Data/@Model.Operation.Value2" target="_blank"><i class="fa-solid fa-file-pdf" style="font-size: 40px; color: red"></i></a>
                        }
                        else if (string.Equals(extension, "docx", StringComparison.OrdinalIgnoreCase) || string.Equals(extension, "doc", StringComparison.OrdinalIgnoreCase))
                        {
                            <a href="~/Images_Data/@Model.Operation.Value2" target="_blank"><i class="fa-solid fa-file-word" style="font-size: 40px; color: blue"></i></a>
                        }
                        else
                        {
                            <img class="editimg" src="~/Images_Data/@Model.Operation.Value2" title="@Model.Operation.Value2">
                        }
                    }
                </div>  <div class="col-md-2">
                    @if (!string.IsNullOrEmpty(Model.Operation.Value3))
                    {
                        var extension = Model.Operation.Value3.Split('.').LastOrDefault();

                        if (string.Equals(extension, "pdf", StringComparison.OrdinalIgnoreCase))
                        {
                            <a href="~/Images_Data/@Model.Operation.Value3" target="_blank"><i class="fa-solid fa-file-pdf" style="font-size: 40px; color: red"></i></a>
                        }
                        else if (string.Equals(extension, "docx", StringComparison.OrdinalIgnoreCase) || string.Equals(extension, "doc", StringComparison.OrdinalIgnoreCase))
                        {
                            <a href="~/Images_Data/@Model.Operation.Value3" target="_blank"><i class="fa-solid fa-file-word" style="font-size: 40px; color: blue"></i></a>
                        }
                        else
                        {
                            <img class="editimg" src="~/Images_Data/@Model.Operation.Value3" title="@Model.Operation.Value3">
                        }
                    }
                </div> <div class="col-md-2">
                    @if (!string.IsNullOrEmpty(Model.Operation.Value4))
                    {
                        var extension = Model.Operation.Value4.Split('.').LastOrDefault();

                        if (string.Equals(extension, "pdf", StringComparison.OrdinalIgnoreCase))
                        {
                            <a href="~/Images_Data/@Model.Operation.Value4" target="_blank"><i class="fa-solid fa-file-pdf" style="font-size: 40px; color: red"></i></a>
                        }
                        else if (string.Equals(extension, "docx", StringComparison.OrdinalIgnoreCase) || string.Equals(extension, "doc", StringComparison.OrdinalIgnoreCase))
                        {
                            <a href="~/Images_Data/@Model.Operation.Value4" target="_blank"><i class="fa-solid fa-file-word" style="font-size: 40px; color: blue"></i></a>
                        }
                        else
                        {
                            <img class="editimg" src="~/Images_Data/@Model.Operation.Value4" title="@Model.Operation.Value4">
                        }
                    }
                </div>
            </div>

            <a target="_blank" href="@Url.Action("Operation", "Patient",  new { PatientID = @Model.Operation.PatientID,ViewName="Print" })" class="btn btn-primary">Print Data</a>
        </div>
    </div>
</div>



<script>

    $('img').click(function () {
        debugger
        var imgSrc = $(this).attr('src');
        var popupImg = $('<img>').attr('src', imgSrc);
        $('#popup-container').html(popupImg).fadeIn();

        popupImg.css({
            'max-width': '80%',
            'max-height': '80%',
            'width': 'auto',
            'height': 'auto'
        });

        var downloadLink = $('<a>').attr('href', imgSrc).attr('download', 'image.jpg').text('Download');
        downloadLink.css({
            'display': 'block',
            'margin-top': '10px',
            'text-align': 'center',
            'text-decoration': 'none',
            'color': '#fff',
            'background-color': '#337ab7',
            'padding': '10px',
            'border-radius': '5px',
            'cursor': 'pointer'
        });
        $('#popup-container').html('').append(popupImg, downloadLink).fadeIn();
    });

    $('#popup-container').click(function () {
        $(this).fadeOut();
    });


</script>

